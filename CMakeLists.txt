PROJECT(astericxx CXX)
CMAKE_MINIMUM_REQUIRED(VERSION 3.6)

SET(CMAKE_CXX_STANDARD 11)
SET(CMAKE_CXX_FLAGS "-O3" CACHE STRING "" FORCE)


INCLUDE_DIRECTORIES(framework/ autogenerated)

EXECUTE_PROCESS(COMMAND ${CMAKE_CURRENT_SOURCE_DIR}/bin/generate.sh)
FILE(GLOB FRAMEWORK_SOURCES "framework/*.cpp")
FILE(GLOB GENERATED_SOURCES "autogenerated/*.cpp")

ADD_LIBRARY(asterix STATIC ${FRAMEWORK_SOURCES} ${GENERATED_SOURCES})
TARGET_INCLUDE_DIRECTORIES(asterix INTERFACE autogenerated)
TARGET_INCLUDE_DIRECTORIES(asterix INTERFACE framework/)

target_compile_options(asterix PRIVATE -fPIC)
SET_TARGET_PROPERTIES(asterix PROPERTIES LINKER_LANGUAGE CXX)

ADD_SUBDIRECTORY(demo)

ENABLE_TESTING()
ADD_SUBDIRECTORY(tests)


